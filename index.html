<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Pernikahan</title>
    <style>
        .music-player {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }
        .music-control {
            font-size: 24px;
            padding: 10px 15px;
            border-radius: 25px;
            background: #ffffff;
            border: 2px solid #333;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
	<div class="header">
        	<h1>Percobaan Music</h1>
    	</div>
	<div class="elementor-element elementor-element-4a4feeae elementor-view-stacked wdp-sticky-section-positon--top rotate_03 elementor-widget__width-initial elementor-shape-circle elementor-widget elementor-widget-weddingpress-audio" data-id="4a4feeae" data-element_type="widget" data-settings="{&quot;loop&quot;:&quot;yes&quot;}" data-widget_type="weddingpress-audio.default">
		<div class="elementor-widget-container">
			<div id="audio-container" class="audio-box">
				<audio id="song" loop autoplay muted>
					<source src="ytmp3free.cc_maher-zain-harris-j-qalbi-fil-madinah-official-music-video-youtubemp3free.org.mp3" type="audio/mpeg">    
				</audio>		
			</div>
			<div class="music-player">
				<button class="music-control" id="musicBtn">⏸️</button>
			</div>
			<script>
				var settingAutoplay = 'yes';
				window.settingAutoplay = settingAutoplay === 'disable' ? false : true;
				
				// Cek apakah autoplay di-enable
				if (window.settingAutoplay) {
				  // Unmute audio setelah ada interaksi pengguna (misalnya: klik/tap)
				  document.addEventListener('click', function() {
				    const audio = document.getElementById('song');
				    audio.muted = false;
				  });
				}

				
				document.addEventListener('DOMContentLoaded', () => {
			            const bgMusic = document.getElementById('bgMusic');
			            const musicBtn = document.getElementById('musicBtn');
			            let isMusicPlaying = true;
			
			            // Handle error jika elemen tidak ditemukan
			            if(!bgMusic || !musicBtn) {
			                console.error('Elemen tidak ditemukan');
			                if(musicBtn) musicBtn.style.display = 'none';
			                return;
			            }
			            
			            // Fungsi toggle musik
			            const toggleMusic = () => {
			                if(isMusicPlaying) {
			                    bgMusic.pause();
			                } else {
			                    bgMusic.play().catch(handleAudioError);
			                }
			                isMusicPlaying = !isMusicPlaying;
			                updateMusicButton();
			            }
			
			            // Update tampilan tombol
			            const updateMusicButton = () => {
			                musicBtn.textContent = isMusicPlaying ? '⏸️' : '▶️';
			            }
			
			            // Handle error audio
			            const handleAudioError = (error) => {
			                console.error('Error audio:', error);
			                musicBtn.style.backgroundColor = '#ffcccc';
			                musicBtn.textContent = '⚠️ Error';
			            }
			            
			            // Event listener untuk tombol
			            musicBtn.addEventListener('click', toggleMusic);
							
			            // Coba autoplay dengan handling khusus
			            const tryAutoplay = () => {
			                bgMusic.play()
			                    .then(() => {
			                        isMusicPlaying = true;
			                        updateMusicButton();
			                    })
			                    .catch(error => {
			                        isMusicPlaying = false;
			                        updateMusicButton();
			                        document.body.addEventListener('click', () => {
			                            bgMusic.play().then(() => {
			                                isMusicPlaying = true;
			                                updateMusicButton();
			                            });
			                        }, { once: true });
			                    });
			            }
			
			            // Inisialisasi
			            if(bgMusic && musicBtn) {
			                tryAutoplay();
			            } else {
			                console.error('Elemen tidak ditemukan');
			                if(musicBtn) musicBtn.style.display = 'none';
			            }
			</script>
		</div>
        </div>
</body>
</html>
